<!DOCTYPE html><html><head><title>AI Text Editor</title><script src="https://cdn.tailwindcss.com"></script><script src="https://unpkg.com/react@18/umd/react.production.min.js"></script><script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script><script src="https://unpkg.com/@babel/standalone/babel.min.js"></script></head><body><div id="root"></div><script type="text/babel">const{useState,useRef,useEffect}=React;function App(){const[img,setImg]=useState(null);const[sel,setSel]=useState(null);const[txt,setTxt]=useState("");const[style,setStyle]=useState({font:"Arial",size:24,color:"#000",bg:"#fff",rot:0,skew:0});const[step,setStep]=useState("upload");const[overlay,setOverlay]=useState(null);const[confirm,setConfirm]=useState(false);const canvasRef=useRef(null);const fileRef=useRef(null);const imgRef=useRef(null);const handleFile=(e)=>{const f=e.target.files?.[0];if(!f)return;const r=new FileReader();r.onload=(ev)=>{const i=new Image();i.onload=()=>{imgRef.current=i;setImg(ev.target.result);setStep("select");setTimeout(()=>drawCanvas(),100);};i.src=ev.target.result;};r.readAsDataURL(f);};const drawCanvas=()=>{const c=canvasRef.current;const i=imgRef.current;if(!c||!i)return;c.width=i.naturalWidth;c.height=i.naturalHeight;const ctx=c.getContext("2d");ctx.drawImage(i,0,0);if(overlay){ctx.save();ctx.translate(overlay.x+overlay.w/2,overlay.y+overlay.h/2);ctx.rotate(style.rot*Math.PI/180);ctx.transform(1,0,Math.tan(style.skew*Math.PI/180),1,0,0);ctx.translate(-overlay.w/2,-overlay.h/2);ctx.fillStyle=style.bg;ctx.fillRect(0,0,overlay.w,overlay.h);ctx.fillStyle=style.color;ctx.font=style.size+"px "+style.font;ctx.textBaseline="middle";ctx.fillText(overlay.text,6,overlay.h/2);ctx.restore();}if(sel&&!confirm){ctx.strokeStyle="#3b82f6";ctx.lineWidth=3;ctx.setLineDash([8,4]);ctx.strokeRect(sel.x,sel.y,sel.w,sel.h);ctx.fillStyle="rgba(59,130,246,0.2)";ctx.fillRect(sel.x,sel.y,sel.w,sel.h);}if(confirm&&sel){ctx.strokeStyle="#ef4444";ctx.lineWidth=3;ctx.strokeRect(sel.x-4,sel.y-4,sel.w+8,sel.h+8);ctx.fillStyle="rgba(239,68,68,0.2)";ctx.fillRect(sel.x-4,sel.y-4,sel.w+8,sel.h+8);}};useEffect(()=>{if(img)drawCanvas();},[img,sel,overlay,confirm,style]);const[drag,setDrag]=useState(false);const[start,setStart]=useState(null);const onDown=(e)=>{if(step!=="select"||confirm)return;const r=canvasRef.current.getBoundingClientRect();const x=(e.clientX-r.left)*canvasRef.current.width/r.width;const y=(e.clientY-r.top)*canvasRef.current.height/r.height;setDrag(true);setStart({x,y});setSel(null);};const onMove=(e)=>{if(!drag||!start)return;const r=canvasRef.current.getBoundingClientRect();const x=(e.clientX-r.left)*canvasRef.current.width/r.width;const y=(e.clientY-r.top)*canvasRef.current.height/r.height;setSel({x:Math.min(start.x,x),y:Math.min(start.y,y),w:Math.abs(x-start.x),h:Math.abs(y-start.y)});};const onUp=()=>{setDrag(false);if(sel&&sel.w>20&&sel.h>20)setStep("edit");};const generate=()=>{if(!txt||!sel)return;setConfirm(true);};const apply=()=>{setOverlay({x:sel.x,y:sel.y,w:sel.w,h:sel.h,text:txt});setConfirm(false);setSel(null);setTxt("");setStep("select");};const download=()=>{const l=document.createElement("a");l.download="edited.png";l.href=canvasRef.current.toDataURL();l.click();};return(<div className="min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-6"><div className="max-w-6xl mx-auto"><h1 className="text-4xl font-bold text-white text-center mb-2">AI Text Editor</h1><p className="text-slate-400 text-center mb-6">Upload image, select area, replace text</p><div className="flex justify-center mb-6"><div className="flex items-center gap-4">{["Upload","Select","Edit","Confirm"].map((s,i)=>{const curr=confirm?3:["upload","select","edit"].indexOf(step);return(<div key={s} className="flex items-center gap-2"><div className={`w-8 h-8 rounded-full flex items-center justify-center text-sm ${curr>=i?"bg-blue-500 text-white":"bg-slate-700 text-slate-500"}`}>{i+1}</div><span className={`text-sm ${curr>=i?"text-blue-400":"text-slate-500"}`}>{s}</span>{i<3&&<div className={`w-8 h-0.5 ${curr>i?"bg-blue-500":"bg-slate-700"}`}/>}</div>);})}</div></div><div className="grid grid-cols-1 lg:grid-cols-3 gap-6"><div className="lg:col-span-2"><div className="bg-slate-800 rounded-2xl p-6 relative"><input ref={fileRef} type="file" accept="image/*" onChange={handleFile} className="hidden"/>{!img?(<div onClick={()=>fileRef.current?.click()} className="h-96 border-2 border-dashed border-slate-600 rounded-xl flex flex-col items-center justify-center cursor-pointer hover:border-blue-500"><svg className="w-16 h-16 text-slate-500 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1.5} d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg><span className="text-slate-400">Click to upload image</span></div>):(<canvas ref={canvasRef} className="w-full h-auto cursor-crosshair rounded-lg" style={{maxHeight:"60vh"}} onMouseDown={onDown} onMouseMove={onMove} onMouseUp={onUp} onMouseLeave={onUp}/>)}{confirm&&(<div className="absolute inset-0 bg-black/70 flex items-center justify-center rounded-2xl"><div className="bg-slate-800 rounded-xl p-6 max-w-md border border-slate-600"><h3 className="text-white text-lg font-semibold mb-2">Confirm Replacement</h3><p className="text-slate-400 text-sm mb-4">Text: {txt}</p><div className="flex gap-3"><button onClick={()=>setConfirm(false)} className="flex-1 py-2 bg-slate-700 text-white rounded-lg">Cancel</button><button onClick={apply} className="flex-1 py-2 bg-red-600 text-white rounded-lg">Confirm</button></div></div></div>)}</div>{img&&overlay&&(<button onClick={download} className="mt-3 px-4 py-2 bg-green-600 text-white rounded-lg">Download</button>)}</div><div className="space-y-4"><div className="bg-slate-800 rounded-xl p-4"><h3 className="text-white font-semibold mb-3">Replacement Text</h3><textarea value={txt} onChange={(e)=>setTxt(e.target.value)} placeholder="Enter new text..." disabled={step==="upload"||confirm} className="w-full h-24 bg-slate-700 text-white rounded-lg p-3 resize-none disabled:opacity-50"/></div><div className="bg-slate-800 rounded-xl p-4"><h3 className="text-white font-semibold mb-3">Style</h3><div className="space-y-3"><select value={style.font} onChange={(e)=>setStyle({...style,font:e.target.value})} className="w-full bg-slate-700 text-white rounded-lg p-2">{["Arial","Helvetica","Times New Roman","Georgia","Verdana"].map(f=>(<option key={f} value={f}>{f}</option>))}</select><div className="grid grid-cols-2 gap-3"><input type="number" value={style.size} onChange={(e)=>setStyle({...style,size:+e.target.value})} className="bg-slate-700 text-white rounded-lg p-2"/><div className="flex gap-2"><input type="color" value={style.color} onChange={(e)=>setStyle({...style,color:e.target.value})} className="w-10 h-10 rounded"/><input type="color" value={style.bg} onChange={(e)=>setStyle({...style,bg:e.target.value})} className="w-10 h-10 rounded"/></div></div><div><label className="text-slate-400 text-xs">Rotation: {style.rot}°</label><input type="range" min="-45" max="45" value={style.rot} onChange={(e)=>setStyle({...style,rot:+e.target.value})} className="w-full"/></div><div><label className="text-slate-400 text-xs">Skew: {style.skew}°</label><input type="range" min="-20" max="20" value={style.skew} onChange={(e)=>setStyle({...style,skew:+e.target.value})} className="w-full"/></div></div></div>{step==="edit"&&!confirm&&(<button onClick={generate} disabled={!txt||!sel} className="w-full py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl font-semibold disabled:opacity-50">Preview</button>)}</div></div></div></div>);}ReactDOM.createRoot(document.getElementById("root")).render(<App/>);</script></body></html>